<!DOCTYPE html>
<html lang="lt">
<head>
    <meta charset="UTF-8" />
    <title>Seimo narių balsavimo statistika</title>

    <!-- DataTables CSS -->
    <link
        rel="stylesheet"
        href="https://cdn.datatables.net/1.13.8/css/jquery.dataTables.min.css"
    />

    <style>
        body {
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
                sans-serif;
            margin: 20px;
        }

        h1 {
            font-size: 32px;
            margin-bottom: 4px;
        }

        .period {
            margin-bottom: 18px;
            color: #555;
        }

        .hint {
            background: #f5f5f5;
            border-left: 4px solid #007bff;
            padding: 10px 14px;
            margin-bottom: 18px;
            font-size: 14px;
            color: #333;
        }

        table.dataTable thead th {
            font-weight: 600;
        }

        /* 1 stulpelis – siauras, tik eilės numeriui */
        th.col-eilnr,
        td.col-eilnr {
            width: 55px;
            text-align: center;
        }

        /* 2 stulpelis – platesnis, kad tilptų vardas ir pavardė */
        th.col-vardas,
        td.col-vardas {
            width: 260px;
        }

        table.dataTable tbody td {
            vertical-align: middle;
        }
    </style>
</head>
<body>
    <h1>Seimo narių balsavimo statistika</h1>
    <div class="period">Laikotarpis: 2024-11-14 – 2025-11-14</div>

    <div class="hint">
        Patarimas: norėdami patogiai peržiūrėti duomenis, spauskite ant stulpelių
        pavadinimų („Nedalyvavo“, „Prieš“, „Už“, „Susilaikė“, „Registravosi“, „Už A“, „Už B“).
        Lentelė iškart bus surikiuota pagal pasirinktą pjūvį – taip lengviau matyti,
        kas daugiausiai nedalyvavo, balsavo prieš ar susilaikė.
    </div>

    <table id="balsavimai" class="display" style="width: 100%">
        <thead>
            <tr>
                <th class="col-eilnr">Eil. Nr.</th>
                <th class="col-vardas">Seimo narys</th>
                <th>Nedalyvavo</th>
                <th>Prieš</th>
                <th>Už</th>
                <th>Susilaikė</th>
                <th>Registravosi</th>
                <th>Už A</th>
                <th>Už B</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

    <!-- DataTables JS -->
    <script src="https://cdn.datatables.net/1.13.8/js/jquery.dataTables.min.js"></script>

    <!-- PapaParse CSV parser -->
    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>

    <script>
        // Nuskaitome CSV failą ir užpildome lentelę
        Papa.parse("metu_balsavimas1.csv", {
            download: true,
            header: false,
            skipEmptyLines: true,
            delimiter: ";", // Excel LT dažniausiai eksportuoja su ';'
            complete: function (results) {
                // Pirmoje eilutėje – antraštės, jų nereikia
                const dataRows = results.data.slice(1);

                $("#balsavimai").DataTable({
                    data: dataRows,
                    autoWidth: false,
                    columns: [
                        {
                            // Eil. Nr. – stabilus numeris nuo 1 iki 141,
                            // nepriklausomai nuo rikiavimo / filtravimo
                            data: null,
                            className: "col-eilnr",
                            render: function (data, type, row, meta) {
                                return meta.row + 1;
                            },
                            orderable: false,
                            searchable: false,
                        },
                        {
                            // Seimo narys – CSV stulpelis Nr. 2 (indeksas 2)
                            data: 2,
                            className: "col-vardas",
                        },
                        { data: 3 }, // Nedalyvavo
                        { data: 4 }, // Prieš
                        { data: 5 }, // Už
                        { data: 6 }, // Susilaikė
                        { data: 7 }, // Registravosi
                        { data: 8 }, // Už A
                        { data: 9 }, // Už B
                    ],
                    order: [[1, "asc"]], // pradinis rikiavimas pagal pavardę (abėcėlė)
                    pageLength: 25,
                    language: {
                        decimal: ",",
                        thousands: " ",
                        search: "Ieškoti:",
                        lengthMenu: "Rodyti _MENU_ įrašus",
                        info: "Rodomi _START_–_END_ iš _TOTAL_ įrašų",
                        infoEmpty: "Įrašų nėra",
                        zeroRecords: "Nerasta atitinkančių įrašų",
                        paginate: {
                            first: "Pirmas",
                            last: "Paskutinis",
                            next: "Kitas",
                            previous: "Ankstesnis",
                        },
                    },
                });
            },
        });
    </script>
</body>
</html>
